I tried to reinvent the wheel, didn't go so well.
So reverted to use semaphore.h library as usual! :->
